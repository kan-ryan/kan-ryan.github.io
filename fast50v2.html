<!-- this a comment -->
<!-- all the comments go in between the one shown on next line -->
<!--  -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- link to your CSS and Javascript files in <head> tag area -->
  <link rel="stylesheet" type="text/css" href="css/styleA.css">
  <script type="text/javascript" src="js/generate.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.0.1/lib/anime.min.js"> </script>

  <!-- write your title between <title></title> tag -->
  <title>Fast 50 by Ryan Kan</title>

  <style>
    * {
      background-color: #2a3538;
      color: #55b0c9;
    }
    div.banner {
      text-align: center;
      background-color: black; 
      font-size: 50px;
      padding-top: 1%;
      padding-bottom: 1%;
    }
  </style>
  <script>
    var sheet = JSON.parse(window.localStorage.getItem("sheet"))

    var timeLimit = sheet.timeLimit * 60;
  </script>
</head>

<body>
  <div class="banner">Fast Math Worksheet</div>
  <!-- specify a function to run when button is clicked -->
<!--   <button type="button" onclick="generate.call(sheet)">Click here to generate a new worksheet</button><br><br> -->
  <!-- a placeholder to display a score onto browser after grading -->
  <p1 id="score"></p1>
  <p1 id="timer" style="color: green"></p1>
  <!-- use <form></form> as a placeholder for users to input their answers -->
  <!-- within <form></form>, <div class="row"><div class="column"></div>...</div> tags are used to save space -->
  <form id="frm1">  
  <div class="row">
    <div class="column">
      <prb id="prob0"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob1"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob2"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob3"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob4"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob5"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob6"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob7"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob8"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob9"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob10"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob11"></prb><input type="text" id="ans" name="ans"/><br>
    </div>
    <div class="column">
      <!-- fill in similar tags -->
      <prb id="prob12"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob13"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob14"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob15"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob16"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob17"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob18"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob19"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob20"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob21"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob22"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob23"></prb><input type="text" id="ans" name="ans"/><br>

    </div>
    <div class="column">
      <!-- fill in similar tags -->
      <prb id="prob24"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob25"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob26"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob27"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob28"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob29"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob30"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob31"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob32"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob33"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob34"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob35"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob36"></prb><input type="text" id="ans" name="ans"/><br>

    </div>
    <div class="column">
      <!-- fill in similar tags -->
     
      <prb id="prob37"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob38"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob39"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob40"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob41"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob42"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob43"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob44"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob45"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob46"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob47"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob48"></prb><input type="text" id="ans" name="ans"/><br>
      <prb id="prob49"></prb><input type="text" id="ans" name="ans"/><br>


    </div>
  </div>
  </form>  
  <!-- when final button is clicked, trigger grading function to run -->
  <!-- fill in the correct function call -->
  <div class="row">
  <button id="submitButton">Submit Your Answers</button>
  <button id="backButton" onclick="window.location='settings.html'">Back</button>
  </div>
  <script type="text/javascript">
    // make worksheet
    generate.call(sheet);

    // initialize timer
    var timerDOM = document.getElementById("timer");
    timerDOM.innerHTML = "Time: " + timeLimit;

    // start timer
    let timerStopped = false;
    let secondDelta;
    secondDelta = window.setInterval(
      function() {
        let nextTime = parseInt(timerDOM.innerHTML.split(" ")[1]) - 1;
        timerDOM.innerHTML = "Time: " + nextTime.toString();

        //change color: green, orange, red
        if (nextTime <= 10) {
          timerDOM.style.color = "red";
        } else if (nextTime <= 20) {
          timerDOM.style.color = "orange";
        }

        if (nextTime == 0) {
          timerStopped = true;
          window.clearInterval(secondDelta);
          grade.call(sheet);
          document.getElementById("submitButton").innerHTML = "Try Again";
        }
      },
      1000 //repeat every second
    );

    var submitted = false;
    function handleSubmit() {
      if (submitted || timerStopped) {
        // now this is the Try Again button.
        location.reload();
      }
      submitted = true;
      grade.call(sheet);
      window.clearInterval(secondDelta);
      document.getElementById("submitButton").innerHTML = "Try Again";
    }
    document.getElementById("submitButton").onclick = handleSubmit;
  </script>

</body>

</html>
